<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>{{ title }}</title>

{% if theme == "dark" %}
<style>
:root {
  --bg: #000;
  --fg: #09de7e;
  --border: #09de7e;

  --syn-command: #ffb454;
  --syn-var:     #c792ea;
  --syn-number:  #6cb6ff;
  --syn-string:  #7cc67c;
  --syn-fileext: #8ab4f8; /* informational, NOT error */
  --syn-symbol:  #ffd166;
}
</style>

{% elif theme == "light" %}
<style>
:root {
  --bg: #fff;
  --fg: #036036;
  --border: #036036;

  --syn-command: #b45309;
  --syn-var:     #7c3aed;
  --syn-number:  #2563eb;
  --syn-string:  #15803d;
  --syn-fileext: #2563eb;
  --syn-symbol:  #92400e;
}
</style>

{% elif theme == "hacker" %}
<style>
:root {
  --bg: #000;
  --fg: #00ff00;
  --border: #00ff00;

  --syn-command: #00ff00;
  --syn-var:     #7cff7c;
  --syn-number:  #5cff5c;
  --syn-string:  #9cff9c;
  --syn-fileext: #6cff6c;
  --syn-symbol:  #ccffcc;
}
</style>

{% elif theme == "blue" %}
<style>
:root {
  --bg: #0000ff;
  --fg: #ffffff;
  --border: #ffffff;

  --syn-command: #ffeb3b;
  --syn-var:     #c7d2fe;
  --syn-number:  #93c5fd;
  --syn-string:  #a7f3d0;
  --syn-fileext: #bfdbfe;
  --syn-symbol:  #fde68a;
}
</style>

{% elif theme == "red-light" %}
<style>
:root {
  --bg: #ff0000;
  --fg: #ffffff;
  --border: #ffffff;

  --syn-command: #fff176;
  --syn-var:     #fbcfe8;
  --syn-number:  #e0f2fe;
  --syn-string:  #dcfce7;
  --syn-fileext: #e5e7eb;
  --syn-symbol:  #fde68a;
}
</style>

{% elif theme == "light-red" %}
<style>
:root {
  --bg: #ffffff;
  --fg: #ff0000;
  --border: #ff0000;

  --syn-command: #b91c1c;
  --syn-var:     #9d174d;
  --syn-number:  #1d4ed8;
  --syn-string:  #166534;
  --syn-fileext: #1f2937;
  --syn-symbol:  #92400e;
}
</style>

{% elif theme == "black" %}
<style>
:root {
  --bg: #000;
  --fg: #ffffff;
  --border: #ffffff;

  --syn-command: #fbbf24;
  --syn-var:     #c084fc;
  --syn-number:  #60a5fa;
  --syn-string:  #4ade80;
  --syn-fileext: #9ca3af;
  --syn-symbol:  #fde68a;
}
</style>
{% elif theme == "vscode" %}
<style>
:root {
  /* VS Code Dark+ base */
  --bg: #1e1e1e;
  --fg: #d4d4d4;
  --border: #3c3c3c;

  /* Syntax highlighting (VS Code inspired) */
  --syn-command: #569cd6; /* keywords / commands */
  --syn-var:     #9cdcfe; /* variables */
  --syn-number:  #b5cea8; /* numbers */
  --syn-string:  #ce9178; /* strings */
  --syn-fileext: #dcdcaa; /* types / filenames (NOT error) */
  --syn-symbol:  #c586c0; /* operators / symbols */
}
</style>
{% elif theme == "pycharm" %}
<style>
:root {
  /* PyCharm Darcula base */
  --bg: #2b2b2b;
  --fg: #a9b7c6;
  --border: #3c3f41;

  /* Syntax highlighting (Darcula inspired) */
  --syn-command: #cc7832; /* keywords / commands */
  --syn-var:     #a9b7c6; /* variables (neutral) */
  --syn-number:  #6897bb; /* numbers */
  --syn-string:  #6a8759; /* strings */
  --syn-fileext: #ffc66d; /* filenames / types (NOT error) */
  --syn-symbol:  #a9b7c6; /* operators / symbols */
}
</style>
{% elif theme == "vscode-hc" %}
<style>
:root {
  /* VS Code High Contrast base */
  --bg: #000000;
  --fg: #ffffff;
  --border: #ffffff;

  /* Syntax highlighting (High Contrast) */
  --syn-command: #00ffff; /* cyan keywords */
  --syn-var:     #ffffff; /* plain identifiers */
  --syn-number:  #ffff00; /* bright yellow numbers */
  --syn-string:  #00ff00; /* green strings */
  --syn-fileext: #ffcc00; /* filename/type (safe, not error) */
  --syn-symbol:  #ff00ff; /* magenta operators */
}
</style>
{% elif theme == "sunset" %}
<style>
:root {
  --bg: #1e0f2f; --fg: #ffd6a5; --border: #ff7f50;
  --syn-command: #ff4500; --syn-var: #ffb6c1; --syn-number: #ffa500;
  --syn-string: #ff69b4; --syn-fileext: #da70d6; --syn-symbol: #ff8c00;
}
</style>

{% elif theme == "forest" %}
<style>
:root {
  --bg: #0b3d0b; --fg: #c3fbd8; --border: #4caf50;
  --syn-command: #2e8b57; --syn-var: #6b8e23; --syn-number: #9acd32;
  --syn-string: #32cd32; --syn-fileext: #228b22; --syn-symbol: #66cdaa;
}
</style>

{% elif theme == "cyberpunk" %}
<style>
:root {
  --bg: #0f0f1a; --fg: #f0f0f0; --border: #ff00ff;
  --syn-command: #00ffff; --syn-var: #ff69b4; --syn-number: #00ff00;
  --syn-string: #ffff00; --syn-fileext: #ff4500; --syn-symbol: #7fff00;
}
</style>

{% elif theme == "ocean" %}
<style>
:root {
  --bg: #001f3f; --fg: #a7c7e7; --border: #00bfff;
  --syn-command: #1e90ff; --syn-var: #00ced1; --syn-number: #87cefa;
  --syn-string: #4682b4; --syn-fileext: #5f9ea0; --syn-symbol: #00ffff;
}
</style>

{% elif theme == "retro" %}
<style>
:root {
  --bg: #2e2b2a; --fg: #f5deb3; --border: #deb887;
  --syn-command: #ff6347; --syn-var: #ffd700; --syn-number: #98fb98;
  --syn-string: #ffa07a; --syn-fileext: #d2b48c; --syn-symbol: #cd853f;
}
</style>

{% elif theme == "pastel" %}
<style>
:root {
  --bg: #fdf6f0; --fg: #ff6f91; --border: #ffb6b9;
  --syn-command: #ff9671; --syn-var: #ffc75f; --syn-number: #d65db1;
  --syn-string: #6a2c70; --syn-fileext: #ffee93; --syn-symbol: #ff6f91;
}
</style>

{% elif theme == "galaxy" %}
<style>
:root {
  --bg: #0b0c2a; --fg: #c1c6f5; --border: #7f00ff;
  --syn-command: #9d50bb; --syn-var: #ff77ff; --syn-number: #50c0ff;
  --syn-string: #ffb347; --syn-fileext: #d0d0ff; --syn-symbol: #ff77aa;
}
</style>
{% elif theme == "matrix" %}
<style>
:root {
  --bg: #000000; --fg: #00ff00; --border: #00ff00;
  --syn-command: #00ff00; --syn-var: #33ff33; --syn-number: #99ff99;
  --syn-string: #00cc00; --syn-fileext: #66ff66; --syn-symbol: #00ffcc;
}
</style>
{% elif theme == "sunrise" %}
<style>
:root {
  --bg: #fff8e7; --fg: #ff8c42; --border: #ffbe76;
  --syn-command: #ff6f61; --syn-var: #ffcb77; --syn-number: #ffd166;
  --syn-string: #f6bd60; --syn-fileext: #ffcc5c; --syn-symbol: #f7ede2;
}
</style>
{% elif theme == "BLACK" %}
<style>
:root {
  --bg: #000000; --fg: #000000; --border: #000000;
  --syn-command: #000000; --syn-var: #000000; --syn-number: #000000;
  --syn-string: #000000; --syn-fileext: #000000; --syn-symbol: #000000;
}
</style>
{% elif theme == "twilight" %}
<style>
:root {
  --bg: #1a1b41; --fg: #c5c6f5; --border: #7f7fff;
  --syn-command: #a5a6ff; --syn-var: #ff9dff; --syn-number: #c0c0ff;
  --syn-string: #b19cd9; --syn-fileext: #9fa2ff; --syn-symbol: #c7c7ff;
}
</style>
{% elif theme == "cyberforest" %}
<style>
:root {
  --bg: #041f1e; --fg: #33ffcc; --border: #0ff;
  --syn-command: #0ff; --syn-var: #00cc99; --syn-number: #33ff99;
  --syn-string: #66ffcc; --syn-fileext: #33cccc; --syn-symbol: #00ffcc;
}
</style>
{% else %}
<style>
:root {
  --bg: #000;
  --fg: #ff0000;
  --border: #ff0000;

  --syn-command: #ff0000;
  --syn-var:     #ff7a7a;
  --syn-number:  #ffa7a7;
  --syn-string:  #ffcccc;
  --syn-fileext: #e5e7eb;
  --syn-symbol:  #ffd166;
}
</style>
{% endif %}

<style>
/* Base UI (unchanged semantics) */
body {
  font-size: 16px;
  background: var(--bg);
  color: var(--fg);
  text-align: center;
  margin-top: 80px;
  font-family: monospace;
}

input, button {
  font-size: 16px;
  padding: 10px;
  border-radius: 16px;
  border: none;
  font-family:  monospace;
}

input {
  font-size: 16px;
  background: var(--bg);
  color: var(--fg);
  border: 1px solid var(--border);
  width: 220px;
  font-family: monospace;
}

button {
  font-size: 16px;
  background: var(--fg);
  color: var(--bg);
  cursor: pointer;
  font-family:  monospace;
}

a {
  font-size: 16px;
  color: #e8ecea;
  text-decoration: none;
  font-family: monospace;
}

/* === THEME-AWARE SYNTAX HIGHLIGHTING ONLY === */
.t2tos-command {
  color: var(--syn-command);
  font-weight: 600;
}

.t2tos-var {
  color: var(--syn-var);
  font-style: italic;
}

.t2tos-number {
  color: var(--syn-number);
}

.t2tos-string {
  color: var(--syn-string);
}

.t2tos-fileext {
  color: var(--syn-fileext);
  opacity: 0.9; /* avoids error feel */
}

.t2tos-symbol {
  color: var(--syn-symbol);
  font-variant: small-caps;
}
</style>
</head>

<body>
  <a style="text-align: left;" href=/logout>
      </button>Logout</button>
  </a>
  <h1>{{ text }}</h1>

  <ol>
    {% for m in chat %}
      <li style="text-align:left;">{{ m|highlight_t2tos|safe }}</li>
    {% endfor %}
  </ol>

  <form method="post" action="/redir">
    <input name="command" placeholder="Command" autofocus><span class="cursor"></span>
  </form>
</body>
</html>
